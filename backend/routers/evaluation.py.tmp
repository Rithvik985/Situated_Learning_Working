class RejectionRequest(BaseModel):
    rejection_reason: str
    faculty_id: str

@router.post("/faculty/reject/{submission_id}")
async def reject_submission(
    submission_id: str,
    rejection: RejectionRequest,
    db: Session = Depends(get_db)
):
    """
    Faculty rejection of a student submission with feedback
    """
    try:
        # Get submission
        submission = db.query(DBStudentSubmission).filter(
            DBStudentSubmission.id == submission_id
        ).first()
        
        if not submission:
            raise HTTPException(status_code=404, detail="Submission not found")
            
        # Update submission status and add rejection details
        submission.evaluation_status = "rejected"
        submission.rejection_reason = rejection.rejection_reason
        submission.rejection_date = datetime.utcnow()
        
        # Save to database
        db.commit()
        
        return {"message": "Submission rejected successfully"}
        
    except Exception as e:
        logger.error(f"Error rejecting submission: {str(e)}")
        db.rollback()
        raise HTTPException(status_code=500, detail="Error rejecting submission")